# Task 3  

### Цель задания
Реализовать вычисление суммы элементов массива:
- последовательным способом на CPU;
- параллельной редукцией (reduction) на GPU с использованием CUDA и shared memory.

Размер массива: 1000000 элементов.  
Необходимо сравнить корректность результата и время выполнения.


## Используемая среда
- Google Colab (GPU включён)
- GPU: Tesla T4 (compute capability 7.5)
- Язык: C++ / CUDA
- Компилятор: `nvcc`


## Описание CPU-реализации (последовательная сумма)

### Логика работы
1. Создаётся массив размером N.
2. Массив заполняется значением `1` (для простой проверки результата).
3. Один поток CPU последовательно проходит по массиву.
4. Каждый элемент добавляется к общей сумме.
5. Измеряется время выполнения на CPU.


## Описание GPU-реализации (CUDA reduction + shared memory)

### Общая идея
GPU-редукция выполняет суммирование параллельно:
1. Каждый блок потоков загружает свою часть массива в **shared memory**.
2. Внутри блока выполняется редукция:
   - на каждом шаге уменьшается количество активных потоков в 2 раза,
   - элементы складываются попарно,
   - пока не останется одно значение — сумма блока.
3. Для каждого блока получается одна частичная сумма.
4. Частичные суммы блоков копируются на CPU и суммируются (их мало).


### Шаг 1 — загрузка в shared memory
- Каждый поток берёт один элемент `in[gid]`.
- Записывает его в `sh[tid]`.
- Выполняется синхронизация `__syncthreads()`.

### Шаг 2 — редукция внутри блока
- Используется цикл по `stride`:
  - `stride = blockDim / 2`
  - затем `stride /= 2` до 1
- Потоки с `tid < stride` складывают:
  - `sh[tid] = sh[tid] + sh[tid + stride]`
- После каждого шага выполняется `__syncthreads()`.

### Шаг 3 — сохранение суммы блока
- Поток `tid == 0` записывает `sh[0]` в массив `block_sums[blockIdx.x]`.
  
### Шаг 4 — финальная сумма на CPU
- `block_sums` копируется с GPU на CPU.
- CPU складывает все элементы `block_sums` и получает итоговую сумму.


## Проверка корректности
Сравниваются итоговые значения:
- `CPU sum`
- `GPU sum`

Если значения совпадают, реализация считается корректной.

Для входа из единиц:
- `CPU sum = 1 000 000`
- `GPU sum = 1 000 000`


## Сравнение CPU и GPU
- CPU время выводится в microseconds
- GPU время выводится в milliseconds
